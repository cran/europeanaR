<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Introduction to Europeana Services</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Introduction to Europeana Services</h1>



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This vignette provides an overview of the R package
<code>europeanaR</code>. The package can be used to query Europeana’s
Search and Records API endpoints.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(europeanaR)</span></code></pre></div>
<p>This version of the Europeana API gives users access to massive
amounts of cultural heritage data. See the <a href="https://pro.europeana.eu/page/search">Europeana Search API
documentation</a> for more information on the Europeana API, including
how to apply for access to the Europeana endpoints.</p>
</div>
<div id="the-europeana-search-api" class="section level2">
<h2>The Europeana search API</h2>
<p>The Europeana search API permits the user to access large volumes of
data, and provides some control on the richness of metadata
returned.</p>
<blockquote>
<p>“The Search API provides a way to search for metadata records and
media on the Europeana repository, for instance give me all results for
the word”Vermeer”. Besides the ability to directly search on Europeana,
this API also provides an auxiliary method for translating queries and
support for the OpenSearch.RSS protocol.”.</p>
</blockquote>
<p>The new Europeana API refers to the version 2 API and is fully
backwards compatible with the version 1 API. The v2 API is available
with the request signature shown below.</p>
<blockquote>
<p>api.europeana.eu/record/v2/search.json</p>
</blockquote>
<p>In summary the Europeana Search API allows authorized user:</p>
<ol style="list-style-type: decimal">
<li>Interact with the full data model of millions of cultural heritage
items</li>
<li>Refine your search with more advanced queries like Boolean
Searches</li>
<li>Filter out parts of the results advanced filtering</li>
<li>Choose to only return objects which have certain copyright
statements</li>
<li>Return the results in a language of your choice</li>
<li>Use auxiliary method for translating queries and support for the
OpenSearch.RSS protocol</li>
</ol>
<p>The Europeana Data Model (EDM) design principles are based on the
core principles and best practices of the Semantic Web and Linked Data
efforts to which Europeana contributes. The user can interact with the
EDM via a variety of API endpoints. Europeana is not so much a portal
defined by sheer volume as it is by its ability to make rich data and
functionality available via API.</p>
<p>The search API, which is similar to the search on the website, is the
most intuitive and simple way to interact with EDM. The search API
returns results in JSON format and has a maximum item limit of 100. It
does, however, support a cursored search that allows for bulk metadata
downloads.</p>
</div>
<div id="setting-up-the-api-access" class="section level2">
<h2>Setting up the API access</h2>
<p>In order to get access to the Europeana API endpoints you must <a href="https://pro.europeana.eu/page/get-api">register</a> in order to
receive your free key. You should set it as environmental variable named
as <code>EUROPEANA_KEY</code> in your R session. In the package there is
simple helper function.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set_key</span>(<span class="at">api_key =</span> <span class="st">&quot;ENTER_YOUR_PRIVATE_KEY&quot;</span>)</span></code></pre></div>
<p>Alternatively you can set the environmental variable
<code>EUROPEANA_KEY</code> equal to your private key by typing
<code>usethis::edit_r_environ()</code> and then editing the
<code>.Renviron</code> file.</p>
</div>
<div id="simple-search" class="section level2">
<h2>Simple search</h2>
<p>Because Europeana uses the Apache Solr platform to index its data,
the Search API supports the Apache Lucene Query Syntax by default. To
get the most out of the Europeana repository, advanced users should
follow the Lucene and Apache SOLR guides. For others, basic querying
guide can be found in the Europeana portal, and in the documentation of
this package.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>first_five_results <span class="ot">&lt;-</span> <span class="fu">query_search_api</span>(<span class="at">query =</span> <span class="st">&quot;Mona Lisa&quot;</span>, <span class="at">rows =</span> <span class="dv">5</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>item_metadata <span class="ot">&lt;-</span> first_five_results<span class="sc">$</span>content</span></code></pre></div>
<p>In the query parameter the user have access to rich search
functionalities. Some examples are,</p>
<ul>
<li>Simple search: <code>query=&quot;Mona Lisa&quot;</code></li>
<li>Boolean Search: <code>query=&quot;mona AND lisa&quot;</code></li>
<li>Range Search” <code>query=&quot;[a TO Z]&quot;</code></li>
<li>Timestamp Search:
<code>query=&quot;timestamp_created:&quot;2013-03-16T20:26:27.168Z&quot;</code></li>
</ul>
<p>So far, we’ve only looked at cases where there was a single query
term. It is sometimes useful to divide a query into a variable and a
constant part. For example, for an application that only accesses
objects in London, the constant part of the query can pre-select
London-based objects and the variable part can select objects within
this pre-selection.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="fu">query_search_api</span>(<span class="at">query =</span> <span class="st">&quot;Westminster&quot;</span>, <span class="at">qf =</span> <span class="st">&quot;where:London&quot;</span>)</span></code></pre></div>
</div>
<div id="query-translation" class="section level2">
<h2>Query Translation</h2>
<p>The Search API provides an auxiliary method for translating search
terms into various languages so that they can be used in conjunction
with the main Search API method. The Wikipedia API is used to perform
the actual translation in this method. The method’s signature is as
follows:</p>
<blockquote>
<p>“europeana.eu/api/v2/translateQuery.json?wskey=YOUR_KEY&amp;term=TERM&amp;languageCodes=LANGUAGE_CODES”</p>
</blockquote>
<p>*Example:” Get translations for “Notre Dame” in Dutch, English and
Hungarian</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>resp <span class="ot">&lt;-</span> <span class="fu">query_search_api</span>(<span class="at">languageCodes =</span> <span class="st">&quot;nl,en,hu&quot;</span>,</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">term =</span> <span class="st">&quot;notre dame&quot;</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>                         <span class="at">path =</span> <span class="st">&quot;/api/v2/translateQuery.json&quot;</span>)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>translations <span class="ot">&lt;-</span> resp<span class="sc">$</span>content<span class="sc">$</span>translations</span></code></pre></div>
<p><strong>Notice</strong>: The APIs are served under a unified and
dedicated address “<a href="https://api.europeana.eu/" class="uri">https://api.europeana.eu/</a>”. The path parameter can be
used to access the required services.</p>
</div>
<div id="bulk-download" class="section level2">
<h2>Bulk Download</h2>
<p>To get bulk downloads of specific subsets of items, including both
their metadata and their associated media <code>europeanaR</code>
provides the two functions <code>tidy_cursored_search()</code> and
<code>download_media()</code> respectively.</p>
<p><em>Example:</em> Download up to 500 items and their associated media
using the keyword “animal”, created in the 17th century, and tagged as
paintings.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>res_bulk <span class="ot">&lt;-</span> <span class="fu">tidy_cursored_search</span>(<span class="at">query =</span> <span class="st">&quot;animal&quot;</span>,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">max_items =</span> <span class="dv">500</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">qf =</span> <span class="st">&quot;when:17 AND what:painting&quot;</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>path_to_download_folder <span class="ot">&lt;-</span> <span class="fu">download_media</span>(res_bulk)</span></code></pre></div>
<p>The ellipsis <code>...</code> in the
<code>tidy_cursored_search()</code> arguments passed given parameters to
the underlying GET requests.</p>
</div>
<div id="records-api" class="section level2">
<h2>Records API</h2>
<p>The Record API gives users direct access to Europeana data, which is
modeled using EDM. While EDM is an open flexible data model with many
different types of resources and relationships, the Record API allows
for the retrieval of a segment of EDM for practical purposes (a
subgraph, to use strict terminology). These “atomic” EDM segments
typically contain one Cultural Heritage Object (CHO), the aggregation
information that connects the metadata and digital representations, and
a number of contextual resources pertaining to the CHO, such as agents,
places, concepts, and time.</p>
<p>The <code>id</code> of the object is required by the Records API.</p>
<p><em>Example:</em> Return three CHO for the query “animal” and augment
their associated metadata from the Records API.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">query_search_api</span>(<span class="st">&quot;animal&quot;</span>, <span class="at">rows =</span> <span class="dv">3</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">#tidy data</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>dat <span class="ot">&lt;-</span> <span class="fu">tidy_search_items</span>(res)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">#get records for each item</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>cho_record_meta <span class="ot">&lt;-</span> <span class="fu">lapply</span>(dat<span class="sc">$</span>id, query_record_api)</span></code></pre></div>
<p>There is also an online console interface here: <a href="https://pro.europeana.eu/page/api-rest-console" class="uri">https://pro.europeana.eu/page/api-rest-console</a>.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
